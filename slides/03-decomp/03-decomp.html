<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Decomposition Techniques for Social Epidemiology</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sam Harper" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Decomposition Techniques for Social Epidemiology
## Advanced Social Epidemiology PhD Course
### Sam Harper
### <br> </br>
### University of Copenhagen <br> 2021-10-11 to 2021-10-15 </br>

---









class: center, top, inverse
# .orange[**3. Decomposition**]

--
.left[
## .orange[**3.1 Life Table Decomposition**]
## .orange[**3.2 Concentration Index Decomposition**]
## .orange[**3.3 Kitagawa-Blinder-Oaxaca Decomposition**]
]

---
class: center, top, inverse
# .orange[**3. Decomposition**]

--
.left[
## .orange[**3.1 Life Table Decomposition**]
## .gray[**3.2 Concentration Index Decomposition**]
## .gray[**3.3 Kitagawa-Blinder-Oaxaca Decomposition**]
]

---
# Overview of Decomposition Techniques
.pull-left[
## Today:
- Life table decomposition
- Inequality decomposition: Concentration Index
- Decomposing two-group differences: Blinder-Oaxaca
]

.pull-right[
## Not covered here:
- Effect decomposition (i.e., mediation)
- Decomposition of population rates
- Inequality decomposition: Indexes for Nominal social groups
]
---
# Moving from Description to Explanation
.right-column[
- Ultimately, we want to know why health inequalities are changing over time—what changed?
  - Risk factors?
  - Demographic composition?
  - Social conditions?

- Unpacking the ‘components’ of health inequality is an opportunity to better integrate the monitoring of health inequalities with the etiology of health inequalities.

- These techniques often involve various kinds of ‘counterfactual’ scenarios
]

---
class: center, top, inverse
# .orange[**3. Decomposition**]

.left[
## .orange[**3.1 Life Table Decomposition**]
## .gray[**3.2 Concentration Index Decomposition**]
## .gray[**3.3 Kitagawa-Blinder-Oaxaca Decomposition**]
]

---
## Why does life expectancy go up and down?
.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/le-trends.png" width="80%" height="80%" /&gt;
]


---
## Decomposing between 2 groups
.footnote[Arriaga (1984)]
- E.g., between 2 time periods (2014 and 2017), the general formula is:
`$$_{n}\Delta_{x}=\left[\underbrace{l_{x}^{2017}/l_{0}^{2017}}_{\textrm{fraction of survivors}}\times\overbrace{\left(\dfrac{_{n}L_{x}^{2014}}{l_{x}^{2014}}-\dfrac{_{n}L_{x}^{2017}}{l_{x}^{2017}}\right)}^{\textrm{direct effect}}\right]+\overbrace{\left[\dfrac{T_{x+n}^{2014}}{l_{x+n}^{2014}}\times\dfrac{\dfrac{l_{x}^{2017}l_{x+n}^{2014}}{l_{x}^{2014}}-l_{x+n}^{2017}}{l_{0}^{2017}}\right]}^{\textrm{indirect effect + interaction}}$$`

- Direct effect multiplies the fraction of survivors at each age by the difference between the 2 groups in 'temporary life expectancy' at a given age.
- Indirect effect happens because differences in the direct effect means more survivors at subsequent ages.

---
## Life tables for Black Men
.footnote[Source: Harper et al. 2020]
Our aim is to *decompose* the 0.7 year decline in life expectancy at birth that happened between 2014 and 2017 by age.

.pull-left[
.center[Black Men, 2014]

Age | lx    | Tx     | Lx       | ex  
----|-------|---------|---------|-----
0-1 |	100000 |	98945	| 7266771 |	.red[72.7]
1-4	| 98828	 | 394953 |	7167826	| 72.5
5-14 |	98649 |	985394 |	6772872 |	68.7
...| | | |
85+ |	27676 |	204278 |	204278 |	7.4
]

.pull-right[
.center[Black Men, 2017]

Age | lx    | Tx    |  Lx     | ex
----|-------|---------|---------|----
0-1 |	100000	| 98919 |	7201581 | .red[72.0]
1-4	| 98799	| 394856 | 7102662 |71.9
5-14 | 98629 | 985064 |	6707806 |	68.0
...| | | |
85+ |	27104	| 205713 | 205713 |	7.6
]

---
.pull-left[
.center[Black Men, 2014]

Age | lx    | Tx     | Lx       | ex  
----|-------|---------|---------|-----
0-1 |	100000 |	98945	| 7266771 |	.red[72.7]
1-4	| 98828	 | 394953 |	7167826	| 72.5
5-14 |	98649 |	985394 |	6772872 |	68.7
...| | | |
85+ |	27676 |	204278 |	204278 |	7.4
]

.pull-right[
.center[Black Men, 2017]

Age | lx    | Tx    |  Lx     | ex
----|-------|---------|---------|----
0-1 |	100000	| 98919 |	7201581 | .red[72.0]
1-4	| 98799	| 394856 | 7102662 |71.9
5-14 | 98629 | 985064 |	6707806 |	68.0
...| | | |
85+ |	27104	| 205713 | 205713 |	7.6
]

.white[x]
`$$_{n}\Delta_{x}=\left[98799/100000\times\left(\dfrac{7167826}{98828}-\dfrac{7102662}{98799}\right)\right]+\left[\dfrac{985394}{98649}\times\dfrac{{\dfrac{98799\times98649}{98828}-98629}}{100000}\right]$$`
.left[ 
`\(_{n}\Delta_{x}=-0.01\)` years 
]

---
.footnote[Harper et al. 2020]
.left-column[
### Results by age

- Black men lost the most years.

- Mostly worsening mortality among the young (15-44)

]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-age.png" width="90%" height="90%" /&gt;
]

---
## Decomposing life expectancy differences by cause
The contribution `\(_{n}\Delta_{x}^{i}\)` of each cause of death `\(i\)`
within a given age group is a function of the difference between the
two time periods in the proportion of deaths due to a given cause: 

`$$_{n}\Delta_{x}^{i}={}_{n}\Delta_{x}\times\dfrac{\overbrace{\left(_{n}p_{x}^{i,2014}\times{}_{n}r_{x}^{2014}\right)-\left(_{n}p_{x}^{i,2017}\times{}_{n}r_{x}^{2017}\right)}^{\textrm{difference in share of deaths for cause}\,i}}{\underbrace{_{n}r_{x}^{2014}-_{n}r_{x}^{2017}}_{\textrm{overall mortality rate difference}}}$$`

where `\(_{n}\Delta_{x}\)` is the total contribution for an age group,
`\(_{n}p_{x}^{i}\)` is the proportion of deaths within age group `\(x\)`
due to cause `\(i\)`, and `\(_{n}r_{x}\)` is the overall age-specific death
rate. The total difference in life expectancy is the net sum of the
age-cause components:

`$$\sum_{i}{}_{n}\Delta_{x}^{i}={}_{n}\Delta_{x},\:\textrm{and}\:e_{0}^{2014}-e_{0}^{2017}=\sum_{x}{}_{n}\Delta_{x}=\sum_{x}\sum_{i}{}_{n}\Delta_{x}^{i}$$`

---
.footnote[Harper et al. 2020]
.left-column[
### Results by cause

- Opioids (unintentional overdoses) played a large part.

- Homicide for black men

- Cancer mortality improved.

]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-cause-men.png" width="100%" height="100%" /&gt;
]

---
.footnote[Harper et al. 2020]
.left-column[
### Results by cause

- Opioids (unintentional overdoses) played a large part.

- Homicide for black men

- Cancer mortality improved.

]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-cause-women.png" width="100%" height="100%" /&gt;
]
---
class: center, top, inverse
# .orange[**3. Decomposition**]

.left[
## .gray[**3.1 Life Table Decomposition**]
## .orange[**3.2 Concentration Index Decomposition**]
## .gray[**3.3 Kitagawa-Blinder-Oaxaca Decomposition**]
]

---
# The 'usual' approach
Conventional methods for “explaining” effects of social exposures
Estimate crude or demographic-adjusted effect (logit, hazard)
Add “conventional” risk factors (physiological, behavioural)
Add “novel” risk factors (flavour-of-the-week)
Interpret accordingly

Limitations of conventional approach
Often fail to consider entire socioeconomic distribution (typically low vs. high only) in the context of “explanation”
Often ignore absolute risk
Typically do not provide estimates of the specific contributions of other factors to the “explained” proportion

---
## Formula for calculating the RCI
.footnote[Kakwani et al. 1997]
One way of writing the RCI is:
`$$RCI= \frac{2}{n\mu} \sum_{i=1}^{n}y_{i}R_{i}-1$$`
where `\(\mu\)` is the mean of `\(y_{i}\)` (e.g., smoking status), `\(R_{i}\)` is the fractional rank of the *i*th person in the socioeconomic (i.e., income) distribution.

The Absolute Concentration Index multiplies *RCI* by the mean smoking rate:
`$$ACI=\mu*RCI$$`

---
## Decomposition of the RCI
.footnote[Wagstaff et al. *J Econometrics* 2003]
If we can write the *RCI* as a function of a health variable `\((y_{i})\)` and a socioeconomic rank variable `\((R_{i})\)`, i.e.
`$$RCI= \frac{2}{n\mu} \sum_{i=1}^{n}{\color{red}{y_{i}}}R_{i}-1$$`
--
Suppose that one can write a regression equation expressing the health outcome of interest `\((y_{i})\)` as a function of several `\(k_{i}\)` determinants (e.g., age, gender, urban/rural status):
`$$\color{red}{y_{i}}=\alpha + \sum{\beta_{x}x_{k_{i}}}+\epsilon_{i}$$`

---
## Decomposition of the RCI
Since *RCI* is a function of `\(y_{i}\)` and socioeconomic rank, one can then re-express the concentration index as:
`$$RCI=\sum{(\beta_{k}\bar{x}_{k}/\mu)RCI_{k}}+gRCI_{e}/\mu$$`
Where 
 - `\(\mu\)` is the mean of *y*, 
 - `\(\bar{x}_{k}\)` is the mean of `\(x_{k}\)`, 
 - `\(\beta_{k}\)` is the regression coefficient for `\(x_{k}\)`, and 
 - RCIk is the concentration index for xk.

The basic idea: how much of the overall inequality is due to other factors that are both differentially distributed by income and affect smoking?

---
## Explained and unexplained components
This equation results in 2 components of socioeconomic inequality:
One part that is due to the association between income and other factors that predict health
The other part is ‘unexplained’, i.e., inequality that cannot be explained by systematic variation across income groups in the determinants of health.

---
## Two types of 'explained' components
.right-column[
### The influence of determinants depends on 2 things:

### `\(\color{blue}{RCI_{k}}\)`
#### the strength of the relationship between each factor and income (the concentration index for each determinant)

### `\(\color{blue}{\beta_{k}\bar{x}_{k}/\mu}\)`
#### the strength of the relationship between each factor and health, and its prevalence in the population (also referred to as the ‘elasticity’ of each factor with respect to health).
]

---
## Procedure for decomposing the Concentration Index
1 Estimate a regression equation predicting y (‘health’) from its determinants (βk):

`$$\color{red}{y_{i}}=\alpha + \sum{\beta_{x}x_{k_{i}}}+\epsilon_{i}$$`

2 Calculate the mean of y (μ) and of each of the determinants (e.g., education, age)

3 Calculate the Concentration Index for the health variable (C) each determinant in the equation predicting health (Ck).
That is, use each determinant as the “outcome” and estimate a CI for age, CI for education, etc.

---
## Procedure for decomposing the Concentration Index

4 Calculate the absolute contribution of each determinant by multiplying its ‘elasticity’ by its C:




5 Calculate the percentage contribution of each determinant:

---
A few examples

---
---
background-image: url(../../images/iran-decomp.png)
background-size: contain
.footnote[Hosseinpoor et al. IJE 2005]


---
&lt;img src="/Users/samharper/git/adv-soc-epi/images/iran-decomp.png" width="100%" height="100%" /&gt;

---
background-image: url(../../images/can-usa-decomp.png)
background-size: contain
.footnote[McGrail et al. AJPH 2007]

---
class: center, middle, inverse
# Example: Decomposing Socioeconomic Inequality in Current Smoking

---
.left-column[
### Smoking by income quintile
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/smoking-quintiles.png" width="100%" height="100%" /&gt;
]

---
.left-column[
### Concentration curve for smoking
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/cc-smoking.png" width="100%" height="100%" /&gt;
]

---
.left-column[
### Estimation for a specific factor: Education
]
.right-column[
Recall the decomposition formula:

`$$RCI=\sum{(\beta_{k}\bar{x}_{k}/\mu)RCI_{k}}+gRCI_{e}/\mu$$`
- Estimated `\(\beta\)` coeff on education (logit scale): -.0389 (OR = 0.96)
- Marginal effect on probability scale: -.0051 (0.5 pct points)
- Mean education: 8.9 yrs
- Mean smoking rate: 17.5%

With these parameters, the elasticity of smoking with respect to education is: (-.0051 * 8.9 / .175) = -.2582

Interpretation: a 1% increase in education decreases smoking by 26% (not percentage points!). What about the RCI for education?
]

---
.left-column[
### Concentration curve for education
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/rci-educ.png" width="100%" height="100%" /&gt;
]

---
.left-column[
### Estimation for a specific factor: Education
]

.right-column[
Recall the decomposition formula:

`$$RCI=\sum{(\color{red}{\beta_{k}\bar{x}_{k}/\mu})\color{blue}{RCI_{k}}}+gRCI_{e}/\mu$$`


So the .red[elasticity of smoking] (from the previous slide) with respect to education is (-.0051 * 8.9 / .175) = -.2582

Now we have the .blue[RCI for education] = 0.156

So now we can calculate the contribution of education as:

`$$\text{Elasticity}\times RCI_{ed} = -.2582 * .156 = -.04$$`

Thus education accounts for -.04/ -.0939 = 41.6% 
]

---
.left-column[
Decomposition of Income-Related Inequality in Smoking: Americas region

Overall RCI = -0.094
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-table-determinants.png" width="100%" height="100%" /&gt;
]

---
.left-column[
Contrasting components of income-related inequality

Education:
- Elasticity stronger in W Pacific
- `\(RCI_{ed}\)` stronger in Americas

- Implications for intervention?
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-contrast.png" width="100%" height="100%" /&gt;
]

---
## Caveats for decomposing the RCI
.right-column[
Decomposition results will be sensitive to the choice of determinants included (i.e., how well-specified the model is for predicting y).

The regression equations are predictive and not causal models.

Main utility is not in estimating the potential impact on y of changing the distribution of socioeconomic position, but in indicating the potential role that other factors may play in generating socioeconomic inequalities in health.
]


---
class: center, top, inverse
# .orange[**3. Decomposition**]

.left[
## .gray[**3.1 Life Table Decomposition**]
## .gray[**3.2 Concentration Index Decomposition**]
## .orange[**3.3 Kitagawa-Blinder-Oaxaca Decomposition**]
]

---
# Idea
The core idea is to explain the distribution of the outcome variable in question by a set of factors that vary systematically with exposure status.

Thus, we want to know, on average, why the mean level of health or disease differs between exposed and unexposed groups.

Since, for most health outcomes there are multiple determinants, we may want to know which of these determinants plays more or less important roles in explaining the difference in average outcomes.

“Unpacking” or “decomposing” difference.

---
# Origins


---
## Brief note on interpretation
Decomposition methods are based on regression analyses, and thus all of the usual caveats about good specification apply

If regressions are purely descriptive, they reveal the associations that characterize the health inequality
Then inequality is explained in a statistical sense but implications for policies to reduce inequality are limited

If data allow identification of causal effects, then the factors that generate the inequality are identified
Then one can (potentially) draw conclusions about how policies would impact on inequality

.footnote[O'Donnell 2008]

---
# Kitagawa-Blinder-Oaxaca: Basic Idea
.right-column[
### Two potential sources of mean differences in outcomes

### 1. Means
#### Differences in the prevalence of determinants of outcome

### 2. Effects
#### Differences in the effect of a given determinant on the outcome (i.e., effect measure modification)
]

---
background-image: url(../../images/decomp-ex-spain.png)
background-size: contain

---
.right-column[

] url(../../images/decomp-ex-spain.png)

---
.left-column[
### First method
- Coefficients of unexposed

- Means of exposed
]

.right-column[
.center[
`\(y^{exp} - y^{unexp} = \Delta\bar{x}\beta^{unexp}-\Delta\beta x^{exp}\)`
&lt;img src="/Users/samharper/git/adv-soc-epi/images/kbo-first-method.png" width="100%" height="100%" /&gt;
]]

---
.left-column[
### Second method
- Coefficients of exposed

- Means of unexposed
]

.right-column[
.center[
`\(y^{exp} - y^{unexp} = \Delta\bar{x}\beta^{exp}-\Delta\beta x^{unexp}\)`
&lt;img src="/Users/samharper/git/adv-soc-epi/images/kbo-second-method.png" width="100%" height="100%" /&gt;
]]

---
## The two methods are equally valid
.right-column[
In the first,the differences in the x’s are weighted by the coefficients of the unexposed group and the differences in the coefficients are weighted by the x’s of the exposed group: 
`$$y^{exp} - y^{unexp} = \Delta\bar{x}\beta^{unexp}-\Delta\beta x^{exp}$$`

whereas, in the second, the differences in the x’s are weighted by the coefficients of the exposed group and the differences in the coefficients are weighted by the x’s of the unexposed group: 
`$$y^{exp} - y^{unexp} = \Delta\bar{x}\beta^{exp}-\Delta\beta x^{unexp}$$`
]
---
# Basic question
.left-column[
&lt;img src="03-decomp_files/figure-html/unnamed-chunk-14-1.png" width="100%" height="100%" /&gt;
]

.right-column[
What is the average difference in blood pressure between those with low vs. high education?

How much of this difference is due to the fact that determinants of blood pressure (e.g., BMI, smoking, demographics) differ between low and high educated groups?

Any residual difference is due to educational differences in the associations of risk factors for blood pressure.
]

---
# Example data
.left-column[
&lt;img src="03-decomp_files/figure-html/unnamed-chunk-15-1.png" width="100%" height="100%" /&gt;
]
.right-column[
US NHANES follow up survey (1988-2006), baseline data

Systolic blood pressure as outcome (mmHg)

Overall difference by education (0: &gt;=12y educ, 1: &lt;12y educ)

Potential determinants (the Xs):
- age (years)
- age squared
- race (1 = non-white, 0 = other) 
- marital status (1=married, 0=other)
- body mass index (kg/m^2)
- smoking (1=current smoker, 0=other)
]

---
background-image: url(../../images/kbo-density.png)
background-size: contain

---
## Differences in determinants
.left-column[
- Lower educated have higher BMI and are more likely to be smokers, as well as being older
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/kbo-means.png" width="100%" height="100%" /&gt;
]

---
## Differences in coefficients
.left-column[
- BMI and smoking both have larger coefficients for the better educated group.

- Age has a slightly stronger association for the less educated.
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/kbo-coefs.png" width="100%" height="100%" /&gt;
]


---
background-image: url(../../images/kbo-margins.png)
background-size: contain

---
background-image: url(../../images/kbo-decomp.png)
background-size: contain

---
background-image: url(../../images/kbo-decomp-means.png)
background-size: contain

---
background-image: url(../../images/kbo-decomp-coefs.png)
background-size: contain

---
background-image: url(../../images/kbo-decomp-coefs2.png)
background-size: contain

---
background-image: url(../../images/kbo-decomp-pooled.png)
background-size: contain

---
## Caveat: results depend on specification
.left-column[
Adding gender increases the “explained” component (i.e., “endowments”) from -2.77 to -2.95, so important consequences for how much of the gap is “unexplained”
]

.right-column[
&lt;img src="/Users/samharper/git/adv-soc-epi/images/decomp-stata.png" width="100%" height="100%" /&gt;
]

---
## Methods frontier


---
# Summary
.left-column[
&lt;img src="03-decomp_files/figure-html/unnamed-chunk-19-1.png" width="100%" height="100%" /&gt;
]

.right-column[
Various decomposition techniques exist that may be useful for analyzing social determinants of health
Life table decomposition—over time or between groups, or both
Regression-based decomposition of Concentration Index
Oaxaca decomposition of mean health between groups

All of these techniques make assumptions that need to be evaluated in the course of analysis

When used properly, decomposition techniques can help to provide key evidence on why health inequalities exist and change over time.
]
---
class: center, top, inverse
# .orange[**Break!**] ☕
<div class="countdown" id="timer_6165e2d0" style="top:15%;right:0;bottom:15%;left:0;margin:5%;padding:50px;font-size:7em;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
